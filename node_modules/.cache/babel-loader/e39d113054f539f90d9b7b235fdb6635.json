{"ast":null,"code":"var _jsxFileName = \"/Users/cj/Desktop/swap-attempts/swap2/src/pages/Swap/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { JSBI, Token } from '@pancakeswap-libs/sdk';\nimport React, { useCallback, useContext, useEffect, useMemo, useState, useRef } from 'react';\nimport { ArrowDown } from 'react-feather';\nimport { CardBody, ArrowDownIcon, IconButton, Text, useModal, Link } from '@pancakeswap-libs/uikit';\nimport styled, { ThemeContext } from 'styled-components';\nimport AddressInputPanel from 'components/AddressInputPanel';\nimport Card from 'components/Card';\nimport { AutoColumn } from 'components/Column';\nimport ConfirmSwapModal from 'components/swap/ConfirmSwapModal';\nimport CurrencyInputPanel from 'components/CurrencyInputPanel';\nimport CardNav from 'components/CardNav';\nimport { AutoRow, RowBetween } from 'components/Row';\nimport AdvancedSwapDetailsDropdown from 'components/swap/AdvancedSwapDetailsDropdown';\nimport confirmPriceImpactWithoutFee from 'components/swap/confirmPriceImpactWithoutFee';\nimport { ArrowWrapper, Wrapper } from 'components/swap/styleds';\nimport TradePrice from 'components/swap/TradePrice';\nimport TokenWarningModal from 'components/TokenWarningModal';\nimport SyrupWarningModal from 'components/SyrupWarningModal';\nimport SafeMoonWarningModal from 'components/SafeMoonWarningModal';\nimport Container from 'components/Container';\nimport { INITIAL_ALLOWED_SLIPPAGE } from 'constants/index';\nimport { useActiveWeb3React } from 'hooks';\nimport { useCurrency } from 'hooks/Tokens';\nimport { ApprovalState, useApproveCallbackFromTrade } from 'hooks/useApproveCallback';\nimport { useSwapCallback } from 'hooks/useSwapCallback';\nimport useWrapCallback, { WrapType } from 'hooks/useWrapCallback';\nimport { Field } from 'state/swap/actions';\nimport { useDefaultsFromURLSearch, useDerivedSwapInfo, useSwapActionHandlers, useSwapState } from 'state/swap/hooks';\nimport { useExpertModeManager, useUserDeadline, useUserSlippageTolerance } from 'state/user/hooks';\nimport { LinkStyledButton } from 'components/Shared';\nimport { maxAmountSpend } from 'utils/maxAmountSpend';\nimport { computeTradePriceBreakdown, warningSeverity } from 'utils/prices';\nimport useI18n from 'hooks/useI18n';\nimport PageHeader from 'components/PageHeader';\nimport V2ExchangeRedirectModal from 'components/V2ExchangeRedirectModal';\nimport UnlockButton from 'components/ConnectWalletButton';\nimport AppBody from '../AppBody';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StyledLink = styled(Link)`\n  display: inline;\n  color: ${({\n  theme\n}) => theme.colors.failure};\n`;\n\nconst Swap = () => {\n  _s();\n\n  var _parsedAmounts$indepe, _parsedAmounts$indepe2, _parsedAmounts$depend, _parsedAmounts$depend2, _parsedAmounts$indepe3, _parsedAmounts$Field$;\n\n  const loadedUrlParams = useDefaultsFromURLSearch();\n  const TranslateString = useI18n();\n  const [modalCountdownSecondsRemaining, setModalCountdownSecondsRemaining] = useState(5);\n  const [disableSwap, setDisableSwap] = useState(false);\n  const [hasPoppedModal, setHasPoppedModal] = useState(false);\n  const [interruptRedirectCountdown, setInterruptRedirectCountdown] = useState(false);\n  const [onPresentV2ExchangeRedirectModal] = useModal( /*#__PURE__*/_jsxDEV(V2ExchangeRedirectModal, {\n    handleCloseModal: () => setInterruptRedirectCountdown(true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this));\n  const onPresentV2ExchangeRedirectModalRef = useRef(onPresentV2ExchangeRedirectModal); // token warning stuff\n\n  const [loadedInputCurrency, loadedOutputCurrency] = [useCurrency(loadedUrlParams === null || loadedUrlParams === void 0 ? void 0 : loadedUrlParams.inputCurrencyId), useCurrency(loadedUrlParams === null || loadedUrlParams === void 0 ? void 0 : loadedUrlParams.outputCurrencyId)];\n  const [dismissTokenWarning, setDismissTokenWarning] = useState(false);\n  const [transactionWarning, setTransactionWarning] = useState({\n    selectedToken: null,\n    purchaseType: null\n  });\n  const urlLoadedTokens = useMemo(() => {\n    var _filter, _ref;\n\n    return (_filter = (_ref = [loadedInputCurrency, loadedOutputCurrency]) === null || _ref === void 0 ? void 0 : _ref.filter(c => c instanceof Token)) !== null && _filter !== void 0 ? _filter : [];\n  }, [loadedInputCurrency, loadedOutputCurrency]);\n  const handleConfirmTokenWarning = useCallback(() => {\n    setDismissTokenWarning(true);\n  }, []);\n\n  const handleConfirmWarning = () => {\n    setTransactionWarning({\n      selectedToken: null,\n      purchaseType: null\n    });\n  };\n\n  const {\n    account\n  } = useActiveWeb3React();\n  const theme = useContext(ThemeContext);\n  const [isExpertMode] = useExpertModeManager(); // get custom setting values for user\n\n  const [deadline] = useUserDeadline();\n  const [allowedSlippage] = useUserSlippageTolerance(); // swap state\n\n  const {\n    independentField,\n    typedValue,\n    recipient\n  } = useSwapState();\n  const {\n    v2Trade,\n    currencyBalances,\n    parsedAmount,\n    currencies,\n    inputError: swapInputError\n  } = useDerivedSwapInfo();\n  const {\n    wrapType,\n    execute: onWrap,\n    inputError: wrapInputError\n  } = useWrapCallback(currencies[Field.INPUT], currencies[Field.OUTPUT], typedValue);\n  const showWrap = wrapType !== WrapType.NOT_APPLICABLE;\n  const trade = showWrap ? undefined : v2Trade; // Manage disabled trading pairs that should redirect users to V2\n\n  useEffect(() => {\n    var _currencies$Field$INP, _currencies$Field$OUT;\n\n    const disabledSwaps = ['BNB', 'BUSD', 'USDT', 'USDC', 'CAKE', 'BUNNY', 'ETH', 'BTCB', 'AUTO', 'XVS'];\n    const inputCurrencySymbol = ((_currencies$Field$INP = currencies[Field.INPUT]) === null || _currencies$Field$INP === void 0 ? void 0 : _currencies$Field$INP.symbol) || '';\n    const outputCurrencySymbol = ((_currencies$Field$OUT = currencies[Field.OUTPUT]) === null || _currencies$Field$OUT === void 0 ? void 0 : _currencies$Field$OUT.symbol) || '';\n    const doesInputMatch = disabledSwaps.includes(inputCurrencySymbol);\n    const doesOutputMatch = disabledSwaps.includes(outputCurrencySymbol);\n\n    if (doesInputMatch && doesOutputMatch) {\n      // Prevent infinite re-render of modal with this condition\n      if (!hasPoppedModal) {\n        setHasPoppedModal(true);\n        onPresentV2ExchangeRedirectModalRef.current();\n      } // Controls the swap buttons being disabled & renders a message\n\n\n      setDisableSwap(true);\n\n      const tick = () => {\n        setModalCountdownSecondsRemaining(prevSeconds => prevSeconds - 1);\n      };\n\n      const timerInterval = setInterval(() => tick(), 1000);\n\n      if (interruptRedirectCountdown) {\n        // Reset timer if countdown is interrupted\n        clearInterval(timerInterval);\n        setModalCountdownSecondsRemaining(5);\n      }\n\n      if (modalCountdownSecondsRemaining <= 0) {\n        window.location.href = 'https://exchange.pancakeswap.finance/#/swap';\n      }\n\n      return () => {\n        clearInterval(timerInterval);\n      };\n    } // Unset disableSwap state if the swap inputs & outputs dont match disabledSwaps\n\n\n    setDisableSwap(false);\n    return undefined;\n  }, [currencies, hasPoppedModal, modalCountdownSecondsRemaining, onPresentV2ExchangeRedirectModalRef, interruptRedirectCountdown]);\n  const parsedAmounts = showWrap ? {\n    [Field.INPUT]: parsedAmount,\n    [Field.OUTPUT]: parsedAmount\n  } : {\n    [Field.INPUT]: independentField === Field.INPUT ? parsedAmount : trade === null || trade === void 0 ? void 0 : trade.inputAmount,\n    [Field.OUTPUT]: independentField === Field.OUTPUT ? parsedAmount : trade === null || trade === void 0 ? void 0 : trade.outputAmount\n  };\n  const {\n    onSwitchTokens,\n    onCurrencySelection,\n    onUserInput,\n    onChangeRecipient\n  } = useSwapActionHandlers();\n  const isValid = !swapInputError;\n  const dependentField = independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT;\n  const handleTypeInput = useCallback(value => {\n    onUserInput(Field.INPUT, value);\n  }, [onUserInput]);\n  const handleTypeOutput = useCallback(value => {\n    onUserInput(Field.OUTPUT, value);\n  }, [onUserInput]); // modal and loading\n\n  const [{\n    showConfirm,\n    tradeToConfirm,\n    swapErrorMessage,\n    attemptingTxn,\n    txHash\n  }, setSwapState] = useState({\n    showConfirm: false,\n    tradeToConfirm: undefined,\n    attemptingTxn: false,\n    swapErrorMessage: undefined,\n    txHash: undefined\n  });\n  const formattedAmounts = {\n    [independentField]: typedValue,\n    [dependentField]: showWrap ? (_parsedAmounts$indepe = (_parsedAmounts$indepe2 = parsedAmounts[independentField]) === null || _parsedAmounts$indepe2 === void 0 ? void 0 : _parsedAmounts$indepe2.toExact()) !== null && _parsedAmounts$indepe !== void 0 ? _parsedAmounts$indepe : '' : (_parsedAmounts$depend = (_parsedAmounts$depend2 = parsedAmounts[dependentField]) === null || _parsedAmounts$depend2 === void 0 ? void 0 : _parsedAmounts$depend2.toSignificant(6)) !== null && _parsedAmounts$depend !== void 0 ? _parsedAmounts$depend : ''\n  };\n  const route = trade === null || trade === void 0 ? void 0 : trade.route;\n  const userHasSpecifiedInputOutput = Boolean(currencies[Field.INPUT] && currencies[Field.OUTPUT] && ((_parsedAmounts$indepe3 = parsedAmounts[independentField]) === null || _parsedAmounts$indepe3 === void 0 ? void 0 : _parsedAmounts$indepe3.greaterThan(JSBI.BigInt(0))));\n  const noRoute = !route; // check whether the user has approved the router on the input token\n\n  const [approval, approveCallback] = useApproveCallbackFromTrade(trade, allowedSlippage); // check if user has gone through approval process, used to show two step buttons, reset on token change\n\n  const [approvalSubmitted, setApprovalSubmitted] = useState(false); // mark when a user has submitted an approval, reset onTokenSelection for input field\n\n  useEffect(() => {\n    if (approval === ApprovalState.PENDING) {\n      setApprovalSubmitted(true);\n    }\n  }, [approval, approvalSubmitted]);\n  const maxAmountInput = maxAmountSpend(currencyBalances[Field.INPUT]);\n  const atMaxAmountInput = Boolean(maxAmountInput && ((_parsedAmounts$Field$ = parsedAmounts[Field.INPUT]) === null || _parsedAmounts$Field$ === void 0 ? void 0 : _parsedAmounts$Field$.equalTo(maxAmountInput))); // the callback to execute the swap\n\n  const {\n    callback: swapCallback,\n    error: swapCallbackError\n  } = useSwapCallback(trade, allowedSlippage, deadline, recipient);\n  const {\n    priceImpactWithoutFee\n  } = computeTradePriceBreakdown(trade);\n  const handleSwap = useCallback(() => {\n    if (priceImpactWithoutFee && !confirmPriceImpactWithoutFee(priceImpactWithoutFee)) {\n      return;\n    }\n\n    if (!swapCallback) {\n      return;\n    }\n\n    setSwapState(prevState => ({ ...prevState,\n      attemptingTxn: true,\n      swapErrorMessage: undefined,\n      txHash: undefined\n    }));\n    swapCallback().then(hash => {\n      setSwapState(prevState => ({ ...prevState,\n        attemptingTxn: false,\n        swapErrorMessage: undefined,\n        txHash: hash\n      }));\n    }).catch(error => {\n      setSwapState(prevState => ({ ...prevState,\n        attemptingTxn: false,\n        swapErrorMessage: error.message,\n        txHash: undefined\n      }));\n    });\n  }, [priceImpactWithoutFee, swapCallback, setSwapState]); // errors\n\n  const [showInverted, setShowInverted] = useState(false); // warnings on slippage\n\n  const priceImpactSeverity = warningSeverity(priceImpactWithoutFee); // show approve flow when: no error on inputs, not approved or pending, or approved in current session\n  // never show if price impact is above threshold in non expert mode\n\n  const showApproveFlow = !swapInputError && (approval === ApprovalState.NOT_APPROVED || approval === ApprovalState.PENDING || approvalSubmitted && approval === ApprovalState.APPROVED) && !(priceImpactSeverity > 3 && !isExpertMode);\n  const handleConfirmDismiss = useCallback(() => {\n    setSwapState(prevState => ({ ...prevState,\n      showConfirm: false\n    })); // if there was a tx hash, we want to clear the input\n\n    if (txHash) {\n      onUserInput(Field.INPUT, '');\n    }\n  }, [onUserInput, txHash, setSwapState]);\n  const handleAcceptChanges = useCallback(() => {\n    setSwapState(prevState => ({ ...prevState,\n      tradeToConfirm: trade\n    }));\n  }, [trade]); // This will check to see if the user has selected Syrup or SafeMoon to either buy or sell.\n  // If so, they will be alerted with a warning message.\n\n  const checkForWarning = useCallback((selected, purchaseType) => {\n    if (['SYRUP', 'SAFEMOON'].includes(selected)) {\n      setTransactionWarning({\n        selectedToken: selected,\n        purchaseType\n      });\n    }\n  }, [setTransactionWarning]);\n  const handleInputSelect = useCallback(inputCurrency => {\n    setHasPoppedModal(false);\n    setInterruptRedirectCountdown(false);\n    setApprovalSubmitted(false); // reset 2 step UI for approvals\n\n    onCurrencySelection(Field.INPUT, inputCurrency);\n\n    if (inputCurrency.symbol === 'SYRUP') {\n      checkForWarning(inputCurrency.symbol, 'Selling');\n    }\n\n    if (inputCurrency.symbol === 'SAFEMOON') {\n      checkForWarning(inputCurrency.symbol, 'Selling');\n    }\n  }, [onCurrencySelection, setApprovalSubmitted, checkForWarning]);\n  const handleMaxInput = useCallback(() => {\n    if (maxAmountInput) {\n      onUserInput(Field.INPUT, maxAmountInput.toExact());\n    }\n  }, [maxAmountInput, onUserInput]);\n  const handleOutputSelect = useCallback(outputCurrency => {\n    setHasPoppedModal(false);\n    setInterruptRedirectCountdown(false);\n    onCurrencySelection(Field.OUTPUT, outputCurrency);\n\n    if (outputCurrency.symbol === 'SYRUP') {\n      checkForWarning(outputCurrency.symbol, 'Buying');\n    }\n\n    if (outputCurrency.symbol === 'SAFEMOON') {\n      checkForWarning(outputCurrency.symbol, 'Buying');\n    }\n  }, [onCurrencySelection, checkForWarning]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(TokenWarningModal, {\n      isOpen: urlLoadedTokens.length > 0 && !dismissTokenWarning,\n      tokens: urlLoadedTokens,\n      onConfirm: handleConfirmTokenWarning\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SyrupWarningModal, {\n      isOpen: transactionWarning.selectedToken === 'SYRUP',\n      transactionType: transactionWarning.purchaseType,\n      onConfirm: handleConfirmWarning\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SafeMoonWarningModal, {\n      isOpen: transactionWarning.selectedToken === 'SAFEMOON',\n      onConfirm: handleConfirmWarning\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CardNav, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AppBody, {\n      children: /*#__PURE__*/_jsxDEV(Wrapper, {\n        id: \"swap-page\",\n        children: [/*#__PURE__*/_jsxDEV(ConfirmSwapModal, {\n          isOpen: showConfirm,\n          trade: trade,\n          originalTrade: tradeToConfirm,\n          onAcceptChanges: handleAcceptChanges,\n          attemptingTxn: attemptingTxn,\n          txHash: txHash,\n          recipient: recipient,\n          allowedSlippage: allowedSlippage,\n          onConfirm: handleSwap,\n          swapErrorMessage: swapErrorMessage,\n          onDismiss: handleConfirmDismiss\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PageHeader, {\n          description: TranslateString(1192, 'Play your part in building a better future'),\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Test\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n          children: /*#__PURE__*/_jsxDEV(AutoColumn, {\n            gap: \"lg\",\n            children: [/*#__PURE__*/_jsxDEV(CurrencyInputPanel, {\n              label: independentField === Field.OUTPUT && !showWrap && trade ? TranslateString(194, 'From (estimated)') : TranslateString(76, 'From'),\n              value: formattedAmounts[Field.INPUT],\n              showMaxButton: !atMaxAmountInput,\n              currency: currencies[Field.INPUT],\n              onUserInput: handleTypeInput,\n              onMax: handleMaxInput,\n              onCurrencySelect: handleInputSelect,\n              otherCurrency: currencies[Field.OUTPUT],\n              id: \"swap-currency-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n              justify: \"space-between\",\n              children: /*#__PURE__*/_jsxDEV(AutoRow, {\n                justify: isExpertMode ? 'space-between' : 'center',\n                style: {\n                  padding: '0 1rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(ArrowWrapper, {\n                  clickable: true,\n                  children: /*#__PURE__*/_jsxDEV(IconButton, {\n                    variant: \"tertiary\",\n                    onClick: () => {\n                      setApprovalSubmitted(false); // reset 2 step UI for approvals\n\n                      onSwitchTokens();\n                    },\n                    style: {\n                      borderRadius: '50%'\n                    },\n                    scale: \"sm\",\n                    children: /*#__PURE__*/_jsxDEV(ArrowDownIcon, {\n                      color: \"primary\",\n                      width: \"24px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 404,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 395,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 19\n                }, this), recipient === null && !showWrap && isExpertMode ? /*#__PURE__*/_jsxDEV(LinkStyledButton, {\n                  id: \"add-recipient-button\",\n                  onClick: () => onChangeRecipient(''),\n                  children: \"+ Add a send (optional)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 21\n                }, this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CurrencyInputPanel, {\n              value: formattedAmounts[Field.OUTPUT],\n              onUserInput: handleTypeOutput,\n              label: independentField === Field.INPUT && !showWrap && trade ? TranslateString(196, 'To (estimated)') : TranslateString(80, 'To'),\n              showMaxButton: false,\n              currency: currencies[Field.OUTPUT],\n              onCurrencySelect: handleOutputSelect,\n              otherCurrency: currencies[Field.INPUT],\n              id: \"swap-currency-output\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 15\n            }, this), recipient !== null && !showWrap ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(AutoRow, {\n                justify: \"space-between\",\n                style: {\n                  padding: '0 1rem'\n                },\n                children: [/*#__PURE__*/_jsxDEV(ArrowWrapper, {\n                  clickable: false,\n                  children: /*#__PURE__*/_jsxDEV(ArrowDown, {\n                    size: \"16\",\n                    color: theme.colors.textSubtle\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 433,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(LinkStyledButton, {\n                  id: \"remove-recipient-button\",\n                  onClick: () => onChangeRecipient(null),\n                  children: \"- Remove send\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 435,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(AddressInputPanel, {\n                id: \"recipient\",\n                value: recipient,\n                onChange: onChangeRecipient\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 439,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : null, showWrap ? null : /*#__PURE__*/_jsxDEV(Card, {\n              padding: \".25rem .75rem 0 .75rem\",\n              borderRadius: \"18px\",\n              children: /*#__PURE__*/_jsxDEV(AutoColumn, {\n                gap: \"4px\",\n                children: [Boolean(trade) && /*#__PURE__*/_jsxDEV(RowBetween, {\n                  align: \"center\",\n                  children: [/*#__PURE__*/_jsxDEV(Text, {\n                    fontSize: \"20px\",\n                    children: TranslateString(1182, 'Price')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 448,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(TradePrice, {\n                    price: trade === null || trade === void 0 ? void 0 : trade.executionPrice,\n                    showInverted: showInverted,\n                    setShowInverted: setShowInverted\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 449,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 23\n                }, this), allowedSlippage !== INITIAL_ALLOWED_SLIPPAGE && /*#__PURE__*/_jsxDEV(RowBetween, {\n                  align: \"center\",\n                  children: [/*#__PURE__*/_jsxDEV(Text, {\n                    fontSize: \"18px\",\n                    children: TranslateString(88, 'Slippage Tolerance')\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 458,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Text, {\n                    fontSize: \"18px\",\n                    children: [allowedSlippage / 100, \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 459,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 457,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n          children: /*#__PURE__*/_jsxDEV(UnlockButton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AdvancedSwapDetailsDropdown, {\n      trade: trade\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 344,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Swap, \"+XRfItf6O+QMZZ1bLyk0FeVnu60=\", false, function () {\n  return [useDefaultsFromURLSearch, useI18n, useModal, useCurrency, useCurrency, useActiveWeb3React, useExpertModeManager, useUserDeadline, useUserSlippageTolerance, useSwapState, useDerivedSwapInfo, useWrapCallback, useSwapActionHandlers, useApproveCallbackFromTrade, useSwapCallback];\n});\n\n_c = Swap;\nexport default Swap;\n\nvar _c;\n\n$RefreshReg$(_c, \"Swap\");","map":{"version":3,"sources":["/Users/cj/Desktop/swap-attempts/swap2/src/pages/Swap/index.tsx"],"names":["JSBI","Token","React","useCallback","useContext","useEffect","useMemo","useState","useRef","ArrowDown","CardBody","ArrowDownIcon","IconButton","Text","useModal","Link","styled","ThemeContext","AddressInputPanel","Card","AutoColumn","ConfirmSwapModal","CurrencyInputPanel","CardNav","AutoRow","RowBetween","AdvancedSwapDetailsDropdown","confirmPriceImpactWithoutFee","ArrowWrapper","Wrapper","TradePrice","TokenWarningModal","SyrupWarningModal","SafeMoonWarningModal","Container","INITIAL_ALLOWED_SLIPPAGE","useActiveWeb3React","useCurrency","ApprovalState","useApproveCallbackFromTrade","useSwapCallback","useWrapCallback","WrapType","Field","useDefaultsFromURLSearch","useDerivedSwapInfo","useSwapActionHandlers","useSwapState","useExpertModeManager","useUserDeadline","useUserSlippageTolerance","LinkStyledButton","maxAmountSpend","computeTradePriceBreakdown","warningSeverity","useI18n","PageHeader","V2ExchangeRedirectModal","UnlockButton","AppBody","StyledLink","theme","colors","failure","Swap","loadedUrlParams","TranslateString","modalCountdownSecondsRemaining","setModalCountdownSecondsRemaining","disableSwap","setDisableSwap","hasPoppedModal","setHasPoppedModal","interruptRedirectCountdown","setInterruptRedirectCountdown","onPresentV2ExchangeRedirectModal","onPresentV2ExchangeRedirectModalRef","loadedInputCurrency","loadedOutputCurrency","inputCurrencyId","outputCurrencyId","dismissTokenWarning","setDismissTokenWarning","transactionWarning","setTransactionWarning","selectedToken","purchaseType","urlLoadedTokens","filter","c","handleConfirmTokenWarning","handleConfirmWarning","account","isExpertMode","deadline","allowedSlippage","independentField","typedValue","recipient","v2Trade","currencyBalances","parsedAmount","currencies","inputError","swapInputError","wrapType","execute","onWrap","wrapInputError","INPUT","OUTPUT","showWrap","NOT_APPLICABLE","trade","undefined","disabledSwaps","inputCurrencySymbol","symbol","outputCurrencySymbol","doesInputMatch","includes","doesOutputMatch","current","tick","prevSeconds","timerInterval","setInterval","clearInterval","window","location","href","parsedAmounts","inputAmount","outputAmount","onSwitchTokens","onCurrencySelection","onUserInput","onChangeRecipient","isValid","dependentField","handleTypeInput","value","handleTypeOutput","showConfirm","tradeToConfirm","swapErrorMessage","attemptingTxn","txHash","setSwapState","formattedAmounts","toExact","toSignificant","route","userHasSpecifiedInputOutput","Boolean","greaterThan","BigInt","noRoute","approval","approveCallback","approvalSubmitted","setApprovalSubmitted","PENDING","maxAmountInput","atMaxAmountInput","equalTo","callback","swapCallback","error","swapCallbackError","priceImpactWithoutFee","handleSwap","prevState","then","hash","catch","message","showInverted","setShowInverted","priceImpactSeverity","showApproveFlow","NOT_APPROVED","APPROVED","handleConfirmDismiss","handleAcceptChanges","checkForWarning","selected","handleInputSelect","inputCurrency","handleMaxInput","handleOutputSelect","outputCurrency","length","padding","borderRadius","textSubtle","executionPrice"],"mappings":"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","sourcesContent":["import { CurrencyAmount, JSBI, Token, Trade } from '@pancakeswap-libs/sdk'\nimport React, { useCallback, useContext, useEffect, useMemo, useState, useRef } from 'react'\nimport { ArrowDown } from 'react-feather'\nimport { CardBody, ArrowDownIcon, Button, IconButton, Text, useModal, Link, Flex } from '@pancakeswap-libs/uikit'\nimport styled, { ThemeContext } from 'styled-components'\nimport AddressInputPanel from 'components/AddressInputPanel'\nimport Card, { GreyCard } from 'components/Card'\nimport { AutoColumn } from 'components/Column'\nimport ConfirmSwapModal from 'components/swap/ConfirmSwapModal'\nimport CurrencyInputPanel from 'components/CurrencyInputPanel'\nimport CardNav from 'components/CardNav'\nimport { AutoRow, RowBetween } from 'components/Row'\nimport AdvancedSwapDetailsDropdown from 'components/swap/AdvancedSwapDetailsDropdown'\nimport confirmPriceImpactWithoutFee from 'components/swap/confirmPriceImpactWithoutFee'\nimport { ArrowWrapper, BottomGrouping, SwapCallbackError, Wrapper } from 'components/swap/styleds'\nimport TradePrice from 'components/swap/TradePrice'\nimport TokenWarningModal from 'components/TokenWarningModal'\nimport SyrupWarningModal from 'components/SyrupWarningModal'\nimport SafeMoonWarningModal from 'components/SafeMoonWarningModal'\nimport ProgressSteps from 'components/ProgressSteps'\nimport Container from 'components/Container'\n\nimport { INITIAL_ALLOWED_SLIPPAGE } from 'constants/index'\nimport { useActiveWeb3React } from 'hooks'\nimport { useCurrency } from 'hooks/Tokens'\nimport { ApprovalState, useApproveCallbackFromTrade } from 'hooks/useApproveCallback'\nimport { useSwapCallback } from 'hooks/useSwapCallback'\nimport useWrapCallback, { WrapType } from 'hooks/useWrapCallback'\nimport { Field } from 'state/swap/actions'\nimport { useDefaultsFromURLSearch, useDerivedSwapInfo, useSwapActionHandlers, useSwapState } from 'state/swap/hooks'\nimport { useExpertModeManager, useUserDeadline, useUserSlippageTolerance } from 'state/user/hooks'\nimport { LinkStyledButton } from 'components/Shared'\nimport { maxAmountSpend } from 'utils/maxAmountSpend'\nimport { computeTradePriceBreakdown, warningSeverity } from 'utils/prices'\nimport Loader from 'components/Loader'\nimport useI18n from 'hooks/useI18n'\nimport PageHeader from 'components/PageHeader'\nimport V2ExchangeRedirectModal from 'components/V2ExchangeRedirectModal'\nimport UnlockButton from 'components/ConnectWalletButton'\n\nimport AppBody from '../AppBody'\n\nconst StyledLink = styled(Link)`\n  display: inline;\n  color: ${({ theme }) => theme.colors.failure};\n`\n\nconst Swap = () => {\n  const loadedUrlParams = useDefaultsFromURLSearch()\n  const TranslateString = useI18n()\n  const [modalCountdownSecondsRemaining, setModalCountdownSecondsRemaining] = useState(5)\n  const [disableSwap, setDisableSwap] = useState(false)\n  const [hasPoppedModal, setHasPoppedModal] = useState(false)\n  const [interruptRedirectCountdown, setInterruptRedirectCountdown] = useState(false)\n  const [onPresentV2ExchangeRedirectModal] = useModal(\n    <V2ExchangeRedirectModal handleCloseModal={() => setInterruptRedirectCountdown(true)} />\n  )\n  const onPresentV2ExchangeRedirectModalRef = useRef(onPresentV2ExchangeRedirectModal)\n  // token warning stuff\n  const [loadedInputCurrency, loadedOutputCurrency] = [\n    useCurrency(loadedUrlParams?.inputCurrencyId),\n    useCurrency(loadedUrlParams?.outputCurrencyId),\n  ]\n  const [dismissTokenWarning, setDismissTokenWarning] = useState<boolean>(false)\n  const [transactionWarning, setTransactionWarning] = useState<{\n    selectedToken: string | null\n    purchaseType: string | null\n  }>({\n    selectedToken: null,\n    purchaseType: null,\n  })\n  const urlLoadedTokens: Token[] = useMemo(\n    () => [loadedInputCurrency, loadedOutputCurrency]?.filter((c): c is Token => c instanceof Token) ?? [],\n    [loadedInputCurrency, loadedOutputCurrency]\n  )\n  const handleConfirmTokenWarning = useCallback(() => {\n    setDismissTokenWarning(true)\n  }, [])\n\n  const handleConfirmWarning = () => {\n    setTransactionWarning({\n      selectedToken: null,\n      purchaseType: null,\n    })\n  }\n\n  const { account } = useActiveWeb3React()\n  const theme = useContext(ThemeContext)\n\n  const [isExpertMode] = useExpertModeManager()\n\n  // get custom setting values for user\n  const [deadline] = useUserDeadline()\n  const [allowedSlippage] = useUserSlippageTolerance()\n\n  // swap state\n  const { independentField, typedValue, recipient } = useSwapState()\n  const { v2Trade, currencyBalances, parsedAmount, currencies, inputError: swapInputError } = useDerivedSwapInfo()\n  const {\n    wrapType,\n    execute: onWrap,\n    inputError: wrapInputError,\n  } = useWrapCallback(currencies[Field.INPUT], currencies[Field.OUTPUT], typedValue)\n  const showWrap: boolean = wrapType !== WrapType.NOT_APPLICABLE\n  const trade = showWrap ? undefined : v2Trade\n\n  // Manage disabled trading pairs that should redirect users to V2\n  useEffect(() => {\n    const disabledSwaps = ['BNB', 'BUSD', 'USDT', 'USDC', 'CAKE', 'BUNNY', 'ETH', 'BTCB', 'AUTO', 'XVS']\n    const inputCurrencySymbol = currencies[Field.INPUT]?.symbol || ''\n    const outputCurrencySymbol = currencies[Field.OUTPUT]?.symbol || ''\n    const doesInputMatch = disabledSwaps.includes(inputCurrencySymbol)\n    const doesOutputMatch = disabledSwaps.includes(outputCurrencySymbol)\n\n    if (doesInputMatch && doesOutputMatch) {\n      // Prevent infinite re-render of modal with this condition\n      if (!hasPoppedModal) {\n        setHasPoppedModal(true)\n        onPresentV2ExchangeRedirectModalRef.current()\n      }\n\n      // Controls the swap buttons being disabled & renders a message\n      setDisableSwap(true)\n\n      const tick = () => {\n        setModalCountdownSecondsRemaining((prevSeconds) => prevSeconds - 1)\n      }\n      const timerInterval = setInterval(() => tick(), 1000)\n\n      if (interruptRedirectCountdown) {\n        // Reset timer if countdown is interrupted\n        clearInterval(timerInterval)\n        setModalCountdownSecondsRemaining(5)\n      }\n\n      if (modalCountdownSecondsRemaining <= 0) {\n        window.location.href = 'https://exchange.pancakeswap.finance/#/swap'\n      }\n\n      return () => {\n        clearInterval(timerInterval)\n      }\n    }\n\n    // Unset disableSwap state if the swap inputs & outputs dont match disabledSwaps\n    setDisableSwap(false)\n    return undefined\n  }, [\n    currencies,\n    hasPoppedModal,\n    modalCountdownSecondsRemaining,\n    onPresentV2ExchangeRedirectModalRef,\n    interruptRedirectCountdown,\n  ])\n\n  const parsedAmounts = showWrap\n    ? {\n        [Field.INPUT]: parsedAmount,\n        [Field.OUTPUT]: parsedAmount,\n      }\n    : {\n        [Field.INPUT]: independentField === Field.INPUT ? parsedAmount : trade?.inputAmount,\n        [Field.OUTPUT]: independentField === Field.OUTPUT ? parsedAmount : trade?.outputAmount,\n      }\n\n  const { onSwitchTokens, onCurrencySelection, onUserInput, onChangeRecipient } = useSwapActionHandlers()\n  const isValid = !swapInputError\n  const dependentField: Field = independentField === Field.INPUT ? Field.OUTPUT : Field.INPUT\n\n  const handleTypeInput = useCallback(\n    (value: string) => {\n      onUserInput(Field.INPUT, value)\n    },\n    [onUserInput]\n  )\n  const handleTypeOutput = useCallback(\n    (value: string) => {\n      onUserInput(Field.OUTPUT, value)\n    },\n    [onUserInput]\n  )\n\n  // modal and loading\n  const [{ showConfirm, tradeToConfirm, swapErrorMessage, attemptingTxn, txHash }, setSwapState] = useState<{\n    showConfirm: boolean\n    tradeToConfirm: Trade | undefined\n    attemptingTxn: boolean\n    swapErrorMessage: string | undefined\n    txHash: string | undefined\n  }>({\n    showConfirm: false,\n    tradeToConfirm: undefined,\n    attemptingTxn: false,\n    swapErrorMessage: undefined,\n    txHash: undefined,\n  })\n\n  const formattedAmounts = {\n    [independentField]: typedValue,\n    [dependentField]: showWrap\n      ? parsedAmounts[independentField]?.toExact() ?? ''\n      : parsedAmounts[dependentField]?.toSignificant(6) ?? '',\n  }\n\n  const route = trade?.route\n  const userHasSpecifiedInputOutput = Boolean(\n    currencies[Field.INPUT] && currencies[Field.OUTPUT] && parsedAmounts[independentField]?.greaterThan(JSBI.BigInt(0))\n  )\n  const noRoute = !route\n\n  // check whether the user has approved the router on the input token\n  const [approval, approveCallback] = useApproveCallbackFromTrade(trade, allowedSlippage)\n\n  // check if user has gone through approval process, used to show two step buttons, reset on token change\n  const [approvalSubmitted, setApprovalSubmitted] = useState<boolean>(false)\n\n  // mark when a user has submitted an approval, reset onTokenSelection for input field\n  useEffect(() => {\n    if (approval === ApprovalState.PENDING) {\n      setApprovalSubmitted(true)\n    }\n  }, [approval, approvalSubmitted])\n\n  const maxAmountInput: CurrencyAmount | undefined = maxAmountSpend(currencyBalances[Field.INPUT])\n  const atMaxAmountInput = Boolean(maxAmountInput && parsedAmounts[Field.INPUT]?.equalTo(maxAmountInput))\n\n  // the callback to execute the swap\n  const { callback: swapCallback, error: swapCallbackError } = useSwapCallback(\n    trade,\n    allowedSlippage,\n    deadline,\n    recipient\n  )\n\n  const { priceImpactWithoutFee } = computeTradePriceBreakdown(trade)\n\n  const handleSwap = useCallback(() => {\n    if (priceImpactWithoutFee && !confirmPriceImpactWithoutFee(priceImpactWithoutFee)) {\n      return\n    }\n    if (!swapCallback) {\n      return\n    }\n    setSwapState((prevState) => ({ ...prevState, attemptingTxn: true, swapErrorMessage: undefined, txHash: undefined }))\n    swapCallback()\n      .then((hash) => {\n        setSwapState((prevState) => ({\n          ...prevState,\n          attemptingTxn: false,\n          swapErrorMessage: undefined,\n          txHash: hash,\n        }))\n      })\n      .catch((error) => {\n        setSwapState((prevState) => ({\n          ...prevState,\n          attemptingTxn: false,\n          swapErrorMessage: error.message,\n          txHash: undefined,\n        }))\n      })\n  }, [priceImpactWithoutFee, swapCallback, setSwapState])\n\n  // errors\n  const [showInverted, setShowInverted] = useState<boolean>(false)\n\n  // warnings on slippage\n  const priceImpactSeverity = warningSeverity(priceImpactWithoutFee)\n\n  // show approve flow when: no error on inputs, not approved or pending, or approved in current session\n  // never show if price impact is above threshold in non expert mode\n  const showApproveFlow =\n    !swapInputError &&\n    (approval === ApprovalState.NOT_APPROVED ||\n      approval === ApprovalState.PENDING ||\n      (approvalSubmitted && approval === ApprovalState.APPROVED)) &&\n    !(priceImpactSeverity > 3 && !isExpertMode)\n\n  const handleConfirmDismiss = useCallback(() => {\n    setSwapState((prevState) => ({ ...prevState, showConfirm: false }))\n\n    // if there was a tx hash, we want to clear the input\n    if (txHash) {\n      onUserInput(Field.INPUT, '')\n    }\n  }, [onUserInput, txHash, setSwapState])\n\n  const handleAcceptChanges = useCallback(() => {\n    setSwapState((prevState) => ({ ...prevState, tradeToConfirm: trade }))\n  }, [trade])\n\n  // This will check to see if the user has selected Syrup or SafeMoon to either buy or sell.\n  // If so, they will be alerted with a warning message.\n  const checkForWarning = useCallback(\n    (selected: string, purchaseType: string) => {\n      if (['SYRUP', 'SAFEMOON'].includes(selected)) {\n        setTransactionWarning({\n          selectedToken: selected,\n          purchaseType,\n        })\n      }\n    },\n    [setTransactionWarning]\n  )\n\n  const handleInputSelect = useCallback(\n    (inputCurrency) => {\n      setHasPoppedModal(false)\n      setInterruptRedirectCountdown(false)\n      setApprovalSubmitted(false) // reset 2 step UI for approvals\n      onCurrencySelection(Field.INPUT, inputCurrency)\n      if (inputCurrency.symbol === 'SYRUP') {\n        checkForWarning(inputCurrency.symbol, 'Selling')\n      }\n      if (inputCurrency.symbol === 'SAFEMOON') {\n        checkForWarning(inputCurrency.symbol, 'Selling')\n      }\n    },\n    [onCurrencySelection, setApprovalSubmitted, checkForWarning]\n  )\n\n  const handleMaxInput = useCallback(() => {\n    if (maxAmountInput) {\n      onUserInput(Field.INPUT, maxAmountInput.toExact())\n    }\n  }, [maxAmountInput, onUserInput])\n\n  const handleOutputSelect = useCallback(\n    (outputCurrency) => {\n      setHasPoppedModal(false)\n      setInterruptRedirectCountdown(false)\n      onCurrencySelection(Field.OUTPUT, outputCurrency)\n      if (outputCurrency.symbol === 'SYRUP') {\n        checkForWarning(outputCurrency.symbol, 'Buying')\n      }\n      if (outputCurrency.symbol === 'SAFEMOON') {\n        checkForWarning(outputCurrency.symbol, 'Buying')\n      }\n    },\n    [onCurrencySelection, checkForWarning]\n  )\n\n  return (\n    <Container>\n      <TokenWarningModal\n        isOpen={urlLoadedTokens.length > 0 && !dismissTokenWarning}\n        tokens={urlLoadedTokens}\n        onConfirm={handleConfirmTokenWarning}\n      />\n      <SyrupWarningModal\n        isOpen={transactionWarning.selectedToken === 'SYRUP'}\n        transactionType={transactionWarning.purchaseType}\n        onConfirm={handleConfirmWarning}\n      />\n      <SafeMoonWarningModal isOpen={transactionWarning.selectedToken === 'SAFEMOON'} onConfirm={handleConfirmWarning} />\n      <CardNav />\n      <AppBody>\n        <Wrapper id=\"swap-page\">\n          <ConfirmSwapModal\n            isOpen={showConfirm}\n            trade={trade}\n            originalTrade={tradeToConfirm}\n            onAcceptChanges={handleAcceptChanges}\n            attemptingTxn={attemptingTxn}\n            txHash={txHash}\n            recipient={recipient}\n            allowedSlippage={allowedSlippage}\n            onConfirm={handleSwap}\n            swapErrorMessage={swapErrorMessage}\n            onDismiss={handleConfirmDismiss}\n          />\n          <PageHeader description={TranslateString(1192, 'Play your part in building a better future')}>\n            <h1>Test</h1>\n          </PageHeader>\n          <CardBody>\n            <AutoColumn gap=\"lg\">\n              <CurrencyInputPanel\n                label={\n                  independentField === Field.OUTPUT && !showWrap && trade\n                    ? TranslateString(194, 'From (estimated)')\n                    : TranslateString(76, 'From')\n                }\n                value={formattedAmounts[Field.INPUT]}\n                showMaxButton={!atMaxAmountInput}\n                currency={currencies[Field.INPUT]}\n                onUserInput={handleTypeInput}\n                onMax={handleMaxInput}\n                onCurrencySelect={handleInputSelect}\n                otherCurrency={currencies[Field.OUTPUT]}\n                id=\"swap-currency-input\"\n              />\n              <AutoColumn justify=\"space-between\">\n                <AutoRow justify={isExpertMode ? 'space-between' : 'center'} style={{ padding: '0 1rem' }}>\n                  <ArrowWrapper clickable>\n                    <IconButton\n                      variant=\"tertiary\"\n                      onClick={() => {\n                        setApprovalSubmitted(false) // reset 2 step UI for approvals\n                        onSwitchTokens()\n                      }}\n                      style={{ borderRadius: '50%' }}\n                      scale=\"sm\"\n                    >\n                      <ArrowDownIcon color=\"primary\" width=\"24px\" />\n                    </IconButton>\n                  </ArrowWrapper>\n                  {recipient === null && !showWrap && isExpertMode ? (\n                    <LinkStyledButton id=\"add-recipient-button\" onClick={() => onChangeRecipient('')}>\n                      + Add a send (optional)\n                    </LinkStyledButton>\n                  ) : null}\n                </AutoRow>\n              </AutoColumn>\n              <CurrencyInputPanel\n                value={formattedAmounts[Field.OUTPUT]}\n                onUserInput={handleTypeOutput}\n                label={\n                  independentField === Field.INPUT && !showWrap && trade\n                    ? TranslateString(196, 'To (estimated)')\n                    : TranslateString(80, 'To')\n                }\n                showMaxButton={false}\n                currency={currencies[Field.OUTPUT]}\n                onCurrencySelect={handleOutputSelect}\n                otherCurrency={currencies[Field.INPUT]}\n                id=\"swap-currency-output\"\n              />\n\n              {recipient !== null && !showWrap ? (\n                <>\n                  <AutoRow justify=\"space-between\" style={{ padding: '0 1rem' }}>\n                    <ArrowWrapper clickable={false}>\n                      <ArrowDown size=\"16\" color={theme.colors.textSubtle} />\n                    </ArrowWrapper>\n                    <LinkStyledButton id=\"remove-recipient-button\" onClick={() => onChangeRecipient(null)}>\n                      - Remove send\n                    </LinkStyledButton>\n                  </AutoRow>\n                  <AddressInputPanel id=\"recipient\" value={recipient} onChange={onChangeRecipient} />\n                </>\n              ) : null}\n\n              {showWrap ? null : (\n                <Card padding=\".25rem .75rem 0 .75rem\" borderRadius=\"18px\">\n                  <AutoColumn gap=\"4px\">\n                    {Boolean(trade) && (\n                      <RowBetween align=\"center\">\n                        <Text fontSize=\"20px\">{TranslateString(1182, 'Price')}</Text>\n                        <TradePrice\n                          price={trade?.executionPrice}\n                          showInverted={showInverted}\n                          setShowInverted={setShowInverted}\n                        />\n                      </RowBetween>\n                    )}\n                    {allowedSlippage !== INITIAL_ALLOWED_SLIPPAGE && (\n                      <RowBetween align=\"center\">\n                        <Text fontSize=\"18px\">{TranslateString(88, 'Slippage Tolerance')}</Text>\n                        <Text fontSize=\"18px\">{allowedSlippage / 100}%</Text>\n                      </RowBetween>\n                    )}\n                  </AutoColumn>\n                </Card>\n              )}\n            </AutoColumn>\n          </CardBody>\n          <CardBody>\n            <UnlockButton />\n          </CardBody>\n        </Wrapper>\n      </AppBody>\n      <AdvancedSwapDetailsDropdown trade={trade} />\n    </Container>\n  )\n}\n\nexport default Swap\n"]},"metadata":{},"sourceType":"module"}