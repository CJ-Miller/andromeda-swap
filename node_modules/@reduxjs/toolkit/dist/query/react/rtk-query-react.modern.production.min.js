var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,r=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,u=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,o=(e,o)=>{for(var s in o||(o={}))t.call(o,s)&&u(e,s,o[s]);if(r)for(var s of r(o))n.call(o,s)&&u(e,s,o[s]);return e};import{coreModule as s,buildCreateApi as i}from"@reduxjs/toolkit/query";import{createSelector as c}from"@reduxjs/toolkit";import{useCallback as a,useEffect as l,useLayoutEffect as p,useMemo as d,useRef as f,useState as b}from"react";import{QueryStatus as y,skipToken as m}from"@reduxjs/toolkit/query";import{shallowEqual as h}from"react-redux";import{useEffect as v,useRef as S}from"react";import{shallowEqual as O}from"react-redux";function Q(e){const t=S(e);return v((()=>{O(t.current,e)||(t.current=e)}),[e]),O(t.current,e)?t.current:e}var g,k,x=Symbol(),j=e=>e,L=e=>e,R=(e,t)=>{var r;const n=null!=(r=e.isSuccess?e.data:null==t?void 0:t.data)?r:e.data,u=e.isLoading,s=!n&&u,i=e.isSuccess||u&&!!n;return o(o({},e),{data:n,isFetching:u,isLoading:s,isSuccess:i})},q=e=>e.isUninitialized?o(o({},e),{isUninitialized:!1,isFetching:!0,isLoading:!0,status:y.pending}):e;function z(e){return e.replace(e[0],e[0].toUpperCase())}function F(e,...t){Object.assign(e,...t)}(k=g||(g={})).query="query",k.mutation="mutation";import{useDispatch as P,useSelector as w,useStore as I,batch as E}from"react-redux";var M=Symbol(),D=({batch:e=E,useDispatch:t=P,useSelector:r=w,useStore:n=I}={})=>({name:M,init(u,s,i){const y=u,{buildQueryHooks:v,buildMutationHook:S,usePrefetch:O}=function({api:e,moduleOptions:{batch:t,useDispatch:r,useSelector:n,useStore:u}}){return{buildQueryHooks:function(s){const i=(t,{refetchOnReconnect:n,refetchOnFocus:u,refetchOnMountOrArgChange:o,skip:i=!1,pollingInterval:c=0}={})=>{const{initiate:a}=e.endpoints[s],p=r(),b=Q(i?m:t),y=Q({refetchOnReconnect:n,refetchOnFocus:u,pollingInterval:c}),h=f();return l((()=>{var e;const t=h.current;if(b===m)return null==t||t.unsubscribe(),void(h.current=void 0);const r=null==(e=h.current)?void 0:e.subscriptionOptions;if(t&&t.arg===b)y!==r&&t.updateSubscriptionOptions(y);else{null==t||t.unsubscribe();const e=p(a(b,{subscriptionOptions:y,forceRefetch:o}));h.current=e}}),[p,a,o,b,y]),l((()=>()=>{var e;null==(e=h.current)||e.unsubscribe(),h.current=void 0}),[]),d((()=>({refetch:()=>{var e;null==(e=h.current)||e.refetch()}})),[])},y=({refetchOnReconnect:n,refetchOnFocus:u,pollingInterval:o=0}={})=>{const{initiate:i}=e.endpoints[s],c=r(),[p,y]=b(x),m=f(),h=Q({refetchOnReconnect:n,refetchOnFocus:u,pollingInterval:o});l((()=>{var e,t;const r=null==(e=m.current)?void 0:e.subscriptionOptions;h!==r&&(null==(t=m.current)||t.updateSubscriptionOptions(h))}),[h]);const v=f(h);l((()=>{v.current=h}),[h]);const S=a((function(e,r=!1){t((()=>{var t;null==(t=m.current)||t.unsubscribe(),m.current=c(i(e,{subscriptionOptions:v.current,forceRefetch:!r})),y(e)}))}),[c,i]);return l((()=>()=>{var e;null==(e=null==m?void 0:m.current)||e.unsubscribe()}),[]),l((()=>{p===x||m.current||S(p,!0)}),[p,S]),d((()=>[S,p]),[S,p])},v=(t,{skip:r=!1,selectFromResult:o=j}={})=>{const{select:i}=e.endpoints[s],a=Q(r?m:t),l=f(),b=d((()=>c([i(a),(e,t)=>t],R)),[i,a]),y=d((()=>c([b],o)),[b,o]),v=n((e=>y(e,l.current)),h),S=u(),O=b(S.getState(),l.current);return p((()=>{l.current=O}),[O]),v};return{useQueryState:v,useQuerySubscription:i,useLazyQuerySubscription:y,useLazyQuery(e){const[t,r]=y(e),n=v(r,o(o({},e),{skip:r===x})),u=d((()=>({lastArg:r})),[r]);return d((()=>[t,n,u]),[t,n,u])},useQuery(e,t){const r=i(e,t),n=v(e,o({selectFromResult:e===m||(null==t?void 0:t.skip)?void 0:q},t));return d((()=>o(o({},n),r)),[n,r])}}},buildMutationHook:function(u){return({selectFromResult:o=L}={})=>{const{select:s,initiate:i}=e.endpoints[u],p=r(),[y,v]=b(),S=f();l((()=>()=>{var e;null==(e=S.current)||e.unsubscribe(),S.current=void 0}),[]);const O=a((function(e){let r;return t((()=>{var t;null==(t=null==S?void 0:S.current)||t.unsubscribe(),r=p(i(e)),S.current=r,v(r.requestId)})),r}),[p,i]),Q=d((()=>c([s(y||m)],(e=>o(e)))),[s,y,o]),g=n(Q,h);return d((()=>[O,g]),[O,g])}},usePrefetch:function(t,n){const u=r(),s=Q(n);return a(((r,n)=>u(e.util.prefetch(t,r,o(o({},s),n)))),[t,u,s])}}}({api:u,moduleOptions:{batch:e,useDispatch:t,useSelector:r,useStore:n}});return F(y,{usePrefetch:O}),F(i,{batch:e}),{injectEndpoint(e,t){if(t.type===g.query){const{useQuery:t,useLazyQuery:r,useLazyQuerySubscription:n,useQueryState:o,useQuerySubscription:s}=v(e);F(y.endpoints[e],{useQuery:t,useLazyQuery:r,useLazyQuerySubscription:n,useQueryState:o,useQuerySubscription:s}),u[`use${z(e)}Query`]=t,u[`useLazy${z(e)}Query`]=r}else if(t.type===g.mutation){const t=S(e);F(y.endpoints[e],{useMutation:t}),u[`use${z(e)}Mutation`]=t}}}}});export*from"@reduxjs/toolkit/query";import{configureStore as H}from"@reduxjs/toolkit";import U from"react";import{Provider as $}from"react-redux";import{setupListeners as A}from"@reduxjs/toolkit/query";function C(e){const[t]=U.useState((()=>H({reducer:{[e.api.reducerPath]:e.api.reducer},middleware:t=>t().concat(e.api.middleware)})));return A(t.dispatch,e.setupListeners),U.createElement($,{store:t,context:e.context},e.children)}var B=i(s(),D());export{C as ApiProvider,B as createApi,D as reactHooksModule};